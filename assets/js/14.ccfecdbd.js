(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{478:function(t,a,s){"use strict";s.r(a);var r=s(20),e=Object(r.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("虽然自觉是一个Git工具的老手了，但是平时犯了一点错误，就发现有点捉襟见肘了。就好像今天我把一些代码玩坏了，想撤回到前几个版本去（此时已经push到远程分支），但是仔细一想：卧槽，这操作我好像不太熟练啊，于是乎就有了这篇文章了，介绍如何"),s("strong",[t._v("撤销git push、撤销git commit、撤销git add、修改git提交信息")])]),t._v(" "),s("h2",{attrs:{id:"一、git-push撤销"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#一、git-push撤销"}},[t._v("#")]),t._v(" 一、git push撤销")]),t._v(" "),s("h3",{attrs:{id:"_1-1-使用场景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-使用场景"}},[t._v("#")]),t._v(" 1.1 使用场景")]),t._v(" "),s("p",[t._v("代码已经修改并push到远程分支，想撤回到前几个版本，"),s("font",{attrs:{color:"red"}},[t._v("并且会删除本地代码所做的修改！")])],1),t._v(" "),s("h3",{attrs:{id:"_1-2-示例场景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-示例场景"}},[t._v("#")]),t._v(" 1.2 示例场景")]),t._v(" "),s("p",[t._v("如下图。")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pdG9hay5naXRlZS5pby9ibG9nLWFydGljbGVzL3NvbHV0aW9uL2ltYWdlcy8xLnBuZw?x-oss-process=image/format,png",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"_1-3-示例目标"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-示例目标"}},[t._v("#")]),t._v(" 1.3 示例目标")]),t._v(" "),s("p",[t._v("撤销第二、第三次提交代码，回到第一次提交代码")]),t._v(" "),s("h3",{attrs:{id:"_1-4-详细步骤"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-详细步骤"}},[t._v("#")]),t._v(" 1.4 详细步骤")]),t._v(" "),s("h4",{attrs:{id:"_1-4-1-获取第一次提交commit版本号"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-1-获取第一次提交commit版本号"}},[t._v("#")]),t._v(" 1.4.1 获取第一次提交commit版本号")]),t._v(" "),s("p",[t._v("在idea的Terminal窗口输入git log查看提交日志，结果如图：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pdG9hay5naXRlZS5pby9ibG9nLWFydGljbGVzL3NvbHV0aW9uL2ltYWdlcy8yLnBuZw?x-oss-process=image/format,png",alt:""}})]),t._v(" "),s("p",[t._v("将目标commit版本号复制保存留用。")]),t._v(" "),s("blockquote",[s("p",[t._v("如果git log无法正常显示中文，在Terminal中使用如下命令：")]),t._v(" "),s("p",[t._v("set LESSCHARSET=utf-8")])]),t._v(" "),s("h4",{attrs:{id:"_1-4-2-将本地代码撤销至目标commit版本-高危操作-请明确利害关系"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-2-将本地代码撤销至目标commit版本-高危操作-请明确利害关系"}},[t._v("#")]),t._v(" 1.4.2 将本地代码撤销至目标commit版本（高危操作，请明确利害关系）")]),t._v(" "),s("p",[t._v("执行命令:")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" reset --hard 57f89f403fd8b373a44cf5ae8481402a74799bee\n")])])]),s("p",[t._v("结果：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("HEAD is now at 57f89f4 "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Git演示：第一次提交'")]),t._v("\n")])])]),s("p",[t._v("验证结果：")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("本地分支log")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pdG9hay5naXRlZS5pby9ibG9nLWFydGljbGVzL3NvbHV0aW9uL2ltYWdlcy8zLnBuZw?x-oss-process=image/format,png",alt:""}})])]),t._v(" "),s("li",[s("p",[t._v("远程分支log")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pdG9hay5naXRlZS5pby9ibG9nLWFydGljbGVzL3NvbHV0aW9uL2ltYWdlcy80LnBuZw?x-oss-process=image/format,png",alt:""}})])])]),t._v(" "),s("p",[t._v("此时，本地分支第二、第三次提交已经撤销删除了！")]),t._v(" "),s("h4",{attrs:{id:"_1-4-3-覆盖远程分支代码-高危操作-请明确利害关系"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-3-覆盖远程分支代码-高危操作-请明确利害关系"}},[t._v("#")]),t._v(" 1.4.3 覆盖远程分支代码（高危操作，请明确利害关系）")]),t._v(" "),s("p",[t._v("请明确本地分支代码是最终的代码！否则谨慎操作！执行命令：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" push --force\n")])])]),s("p",[t._v("执行完这一步，git push撤销操作就完成了，git log如图：")]),t._v(" "),s("p",[s("img",{attrs:{src:"https://imgconvert.csdnimg.cn/aHR0cHM6Ly9pdG9hay5naXRlZS5pby9ibG9nLWFydGljbGVzL3NvbHV0aW9uL2ltYWdlcy81LnBuZw?x-oss-process=image/format,png",alt:""}})]),t._v(" "),s("h2",{attrs:{id:"二、git-commit撤销"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#二、git-commit撤销"}},[t._v("#")]),t._v(" 二、git commit撤销")]),t._v(" "),s("h3",{attrs:{id:"_2-1-使用场景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-使用场景"}},[t._v("#")]),t._v(" 2.1 使用场景")]),t._v(" "),s("p",[t._v("代码已经git add，并且git commit，但是还没有git push")]),t._v(" "),s("h3",{attrs:{id:"_2-2-命令使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-命令使用"}},[t._v("#")]),t._v(" 2.2 命令使用")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" reset --soft HEAD~1\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 如果进行了2次commit，想都撤回，可以使用：")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" reset --soft HEAD~2\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## ... 以此类推")]),t._v("\n")])])]),s("h2",{attrs:{id:"三、git-add撤销"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#三、git-add撤销"}},[t._v("#")]),t._v(" 三、git add撤销")]),t._v(" "),s("h3",{attrs:{id:"_3-1-使用场景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-使用场景"}},[t._v("#")]),t._v(" 3.1 使用场景")]),t._v(" "),s("p",[t._v("代码已经执行了git add操作，想撤销git add操作。")]),t._v(" "),s("h3",{attrs:{id:"_3-2-命令使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-命令使用"}},[t._v("#")]),t._v(" 3.2 命令使用")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 全部撤销")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" reset HEAD\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 指定文件撤销 git reset HEAD <file>，文件名可通过git status命令获取。")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" reset HEAD src/main/java/wang/leisure/gitpractice/FirstClass.java\n")])])]),s("h2",{attrs:{id:"四、修改git提交信息"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#四、修改git提交信息"}},[t._v("#")]),t._v(" 四、修改git提交信息")]),t._v(" "),s("h3",{attrs:{id:"_4-1-使用场景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-1-使用场景"}},[t._v("#")]),t._v(" 4.1 使用场景")]),t._v(" "),s("p",[t._v("不修改代码内容，只修改commit信息，在git commit操作之后，git push操作之前。如果你在git push之后操作，也会将本地commit信息变更，但是这样会导致与远程分支信息不一致，所以尽量不要在git push之后操作。")]),t._v(" "),s("h3",{attrs:{id:"_4-2-命令使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4-2-命令使用"}},[t._v("#")]),t._v(" 4.2 命令使用")]),t._v(" "),s("p",[t._v("直接在Terminal中输入：")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" commit --amend\n")])])]),s("p",[t._v("命令输入之后，就是Vim类似的修改、保存操作了。")]),t._v(" "),s("h2",{attrs:{id:"五、恢复文件到上一次提交时的样子"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#五、恢复文件到上一次提交时的样子"}},[t._v("#")]),t._v(" 五、恢复文件到上一次提交时的样子")]),t._v(" "),s("h3",{attrs:{id:"_5-1-使用场景"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-使用场景"}},[t._v("#")]),t._v(" 5.1 使用场景")]),t._v(" "),s("p",[t._v("文件做了很多修改，但是还没有git add，又不想一步步回退。")]),t._v(" "),s("h3",{attrs:{id:"_5-2-命令使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-命令使用"}},[t._v("#")]),t._v(" 5.2 命令使用")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 文件名可通过git status命令获取")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" checkout -- src/main/java/wang/leisure/gitpractice/FirstClass.java\n")])])]),s("p",[t._v("至此，有关git操作撤销相关的内容就分享结束了，有任何不懂的可以留言哦。深夜1:15了，如果文章对你有帮助希望关注支持一下。")])])}),[],!1,null,null,null);a.default=e.exports}}]);